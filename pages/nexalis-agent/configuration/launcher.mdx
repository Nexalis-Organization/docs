---
title: Guide – Nexalis Agent Launcher
sidebar_position: 3
---

This page explains how to configure, install, and operate the Nexalis Agent launcher on Windows and Linux.

## 1) Overview: NexalisAgent and NexalisAgentService

`NexalisAgent` is a command-line control utility.
`NexalisAgentService` is the long-running service responsible for starting, monitoring, and restarting gRPC_kafka and all configured connectors.

The agent logs are always inside `logs/NexalisAgentService/`.
NexalisAgent accepts a series of commands like `start`, `restart`, `status`, `reload`.

## 2) How to configure Nexalis Agent config file (`config.json`)

`config.json` must be in the same folder as `nexalis_agent.sh`. It lists devices per connector type:

```json
{
  "first_connector_type": [
    {
      "deviceModel": "./connector/device_models/model.json",
      "communicationAddress": "IP:PORT or SERIAL:PORT",
      "siteName": "siteName",
      "deviceID": "unique-device-id"
    }
  ],
  "other_connector_type": [
    { "...": "..." },
    { "...": "..." }
  ]
}
```

**OPC UA example with two clients**
```json
{
  "opcua_connector": [
    {
      "deviceModel": "./device_models/OPCUA_Solar_SITENAME.json",
      "communicationAddress": "opc.tcp://[IP]:[PORT]",
      "siteName": "SITENAME",
      "deviceID": "OPCUA_Solar_SITENAME"
    },
    {
      "deviceModel": "./device_models/OPCUA_BESS_SITENAME.json",
      "communicationAddress": "opc.tcp://[IP]:[PORT]",
      "siteName": "SITENAME",
      "deviceID": "OPCUA_BESS_SITENAME"
    }
  ]
}
```

**Mixed example (2 Modbus clients + 1 DNP3 client)**
```json
{
  "modbus_connector": [
    {
      "deviceModel": "./device_models/inverter1.json",
      "communicationAddress": "localhost:50001",
      "siteName": "My site",
      "deviceID": "Inverter_1"
    },
    {
      "deviceModel": "./device_models/inverter2.json",
      "communicationAddress": "localhost:50002",
      "siteName": "My site",
      "deviceID": "Inverter_2"
    }
  ],
  "dnp3_connector": [
    {
      "deviceModel": "./device_models/outstation.json",
      "communicationAddress": "localhost:50003",
      "siteName": "My site",
      "deviceID": "Outstation"
    }
  ]
}
```

> **gRPC_kafka only:** use an **empty** `config.json` (`{}`) to start without connectors.

### Fields required per device

- `deviceModel` — path to the connector’s device-specific config (absolute or relative to the **connector executable**)
- `communicationAddress` — IP:port or serial; formats depend on connector
- `siteName` — groups devices by physical site
- `deviceID` — unique identifier within your fleet


## 3) Running Agent in Windows

### Windows install folders and file locations

In x86_64 the installer installs the agent, gRPC_kafka and connectors inside `C:\Program Files\Nexalis\NexalisAgent`.
X86 connectors are installed inside `C:\Program Files (x86)\Nexalis\NexalisAgent`.
In x86 the installer installs those files inside `C:\Program Files (x86)\Nexalis\NexalisAgent`.

For consistency, the data and logs are written inside `%ProgramData%\Nexalis\NexalisAgent`, usually `C:\ProgramData\Nexalis\NexalisAgent`.

`gRPC_kafka` has its default directory at `%ProgramData%\Nexalis\NexalisAgent\gRPC_kafka`.
Connectors have their default directory inside `%ProgramData%\Nexalis\NexalisAgent\connectors\`.

> For example, the opcua_connector default directory is `%ProgramData%\Nexalis\NexalisAgent\connectors\opcua_connector`

This directory contains:

- device_models -- configurations
- certs -- configuration certificates.

The offline database is inside `%ProgramData%\Nexalis\NexalisAgent\gRPC_kafka\persistent_buffer`.
It is created when gRPC_kafka is configured and running.

You can find the latest NexalisAgentService logs in `%ProgramData%\Nexalis\NexalisAgent\logs\nexalis_agent_service\NexalisAgentService.log`.
You can configure other logs connection for gRPC_kafka in their respective configurations.

If not configured the default log location will be inside the connector data directory.

> For example, the opcua connector logs will be by default inside `%ProgramData%\Nexalis\NexalisAgent\connectors\opcua_connector`

### NexalisAgent Windows commands

The installer adds NexalisAgent to your PATH.
After running the installer, you can open a new Administrator PowerShell window (after a few seconds) and run 

```pwsh
NexalisAgent help
```

```
Usage: C:\Program Files\Nexalis\NexalisAgent\NexalisAgent.exe <command>
  help
      print this text
  version
      get current version v1.1.6
  service-install [ --no-autostart ]
      Create service (sc create) (Require Admin)
  service-reset
      Stop & delete the service (Require Admin)
  start
      Start the service (sc start) (Require Admin)
  restart
      restart the service (sc stop and sc start) (Require Admin)
  reload
      ask service to reload config.json
  stop
      Stop the service (sc stop) (Require Admin)
  authorize-opcda-clsid CLSID
      Authorize service for DCOM access for CLSID (Require Admin)
  gRPC_kafka-sasl-login USERNAME set KAFKA_SASL_USERNAME for admin and KAFKA_SASL_PASSWORD from standard input into service parameters (Require Admin)
```

See [Errors](#7-errors) section if you have an error.

#### version command

Version shows the version of the installed agent.

```pwsh
NexalisAgent version
```

```
NexalisAgent v1.1.6
```

#### status command

Status allows you to query the current status of the agent/gRPC_kafka and all the connectors and to view the JSON configuration errors from `config.json`, connectors and `gRPC_kafka`.

See [Errors](#7-errors) section if you have an error.

```pwsh
NexalisAgent status
```

```json
{
    "status": true,
    "gRPCKafkaStatus": {
        "connector": {
            "name": "gRPC_kafka",
            "deviceModel": "",
            "communicationAddress": "",
            "siteName": "",
            "deviceID": ""
        },
        "running": true,
        "enabled": true,
        "startedAt": "2026-02-04T19:22:25Z",
        "nbRestart": 0
    },
    "connectorsStatus": [
        {
            "connector": {
                "name": "modbus_connector",
                "deviceModel": "./device_models/solar_inverter/SolarInverterSimulator/SolarInverterSimulator.json",
                "communicationAddress": "127.0.0.1:5023",
                "siteName": "SITE_modbus_2",
                "deviceID": "4"
            },
            "running": false,
            "enabled": true,
            "startedAt": "2026-02-04T19:22:45Z",
            "endedAt": "2026-02-04T19:22:45Z",
            "nbRestart": 0,
            "lastExitCode": 127
        },
        {
            "connector": {
                "name": "modbus_connector",
                "deviceModel": "./device_models/solar_inverter/SunSpec-PICS-SMA-SBx.x-1SP-US-401_102/SunSpec-PICS-SMA-SBx.x-1SP-US-401_102.json",
                "communicationAddress": "127.0.0.1:5021",
                "siteName": "SITE_modbus_1",
                "deviceID": "2"
            },
            "running": false,
            "enabled": true,
            "startedAt": "2026-02-04T19:22:45Z",
            "endedAt": "2026-02-04T19:22:45Z",
            "nbRestart": 2,
            "lastExitCode": 127
        },
        {
            "connector": {
                "name": "dnp3_connector",
                "deviceModel": "./device_models/cyclic-1.json",
                "communicationAddress": "127.0.0.1:5025",
                "siteName": "SITE_dnp3_1",
                "deviceID": "6"
            },
            "running": true,
            "enabled": true,
            "startedAt": "2026-02-04T19:22:25Z",
            "nbRestart": 0
        }
    ]
}
```

#### start, stop, restart command

```
NexalisAgent start
```

```
NexalisAgent stop
```

```
NexalisAgent restart
```

In Windows, these commands start, stop, and restart the NexalisAgent Windows service.
The Windows service runs the executable nexalis_agent_service\NexalisAgentService (from Program Files).

> A JSON status is printed. The status field indicates whether the operation was successful.

#### reload command

```
NexalisAgent reload
```

Sends a reload request to NexalisAgentService.
The service compares the new config.json with the running configuration and applies only the necessary changes.
It does the same for all device models used in config.json and the `gRPC_kafka` JSON config.

This allows you to not restart everything when changing just a configuration.
However the reload command does not check credentials or certificates or connections for changes.

> A JSON status is printed. The status field indicates whether the operation was successful.

When a configuration is invalid, you will see the error in the error fields.
```
{
 "status": false,
 "errornum": 1,
 "errorMessage": "connectors/modbus_connector/device_models/SolarInverterSimulator.json: [json.exception.parse_error.101] parse error at line 1, column 2: syntax error while parsing value - invalid literal; last read: '[#'",
 "connector": {
  "name": "modbus_connector",
  "deviceModel": "./device_models/solar_inverter/SolarInverterSimulator/SolarInverterSimulator.json",
  "communicationAddress": "127.0.0.1:5022",
  "siteName": "SITE_modbus_2",
  "deviceID": "3"
 }
}
```

#### gRPC_kafka-sasl-login command

You can update the gRPC_kafka credentials with this command.

Enter the password and then press `Enter` to set the password.

```
NexalisAgent gRPC_kafka-sasl-login myusername
```

Alternatively, you can set credentials inside the service parameters in regedit 
NexalisAgentService reads the 2 service parameters.

- KAFKA_SASL_USERNAME
- KAFKA_SASL_PASSWORD

#### authorize-opcda-clsid command

`opcda32_connector` and `opcda64_connector` require service permission
to access DCOM and to communicate with the configured interface.

You can run
```
NexalisAgent authorize-opcda-clsid CLSID
```
You must replace CLSID with the OPC DA DCOM CLSID you used to connect.

#### service-reset command

This command is run by the Windows uninstaller.
It uninstalls the service.
Preferably it should be stopped first.
The service will not be restarted automatically
```
NexalisAgent service-reset
```

####  service-install [ --no-autostart ]

This command is run by the Windows installer and to be restarted at boot.
It installs the service (it starts at boot with a delay).
The service will be restarted automatically at boot if --no-autostart is not set.

```
NexalisAgent service-install
```

## 4) Running Agent in Linux Docker

### Docker Linux install folders and file locations

Inside Docker the agent is installed in `/usr/local/nexalis-agent`.
You can find the Dockerfile inside the image at `/usr/local/nexalis-agent/Dockerfile`
The data directory inside the container is `/app`.
When running with `./docker_launcher.sh` then `/app` will be mounted to nexalis_agent_volume.

`gRPC_kafka` has its default directory inside `nexalis_agent_volume/gRPC_kafka` and connectors have their default directory inside `nexalis_agent_volume/connectors`.

> For example, the `opcua_connector` default directory is `nexalis_agent_volume/connectors/opcua_connector`.
This is necessary to have a writable directory on a volume.

It contains:

- device_models for configurations
- certs for configuration certificates

The offline database is inside `nexalis_agent_volume/gRPC_kafka/persistent_buffer`.
It is created when gRPC_kafka is configured and running.

You can find the latest NexalisAgentService logs at `nexalis_agent_volume/logs/nexalis_agent_service/NexalisAgentService.log`
You can configure other logs connection for gRPC_kafka in their respective configurations.
If unconfigured, the default log location will be inside the connector data directory.

> For example, for opcua connector the logs will be by default inside `nexalis_agent_volume/connectors/opcua_connector`.

### Docker Linux commands 

After configuring `config_docker_launcher.json` you shall run `./docker_launcher.sh`

Inside the container (for example with Docker exec), you can run the following commands.


```sh
/usr/local/nexalis-agent/NexalisAgent help
```

```
Usage: /usr/local/nexalis-agent/NexalisAgent <command>
  help
        print this text
  version
        get current version v1.1.6
  service-install [--noautostart][--user USER][--data-directory DIR]        Install/enable/start systemd socket+service. run as user (default to nexalis)
  service-reset
        Stop/disable and remove units from /etc/systemd/system
  start [--socket-path SOCKETPATH]
        systemctl start service (requires root) or send start signal by SOCKETPATH
  restart [--socket-path SOCKETPATH]
        systemctl restart service  (requires root) or send restart signal in SOCKETPATH
  reload [--socket-path SOCKETPATH]
        have service reload config.json by service socket  SOCKETPATH
  status [--socket-path SOCKETPATH]
        get service status by service socket or by SOCKETPATH
  stop [--socket-path SOCKETPATH]
        stop service using systemctl (requires root) or by socket if provided
  service-run  --socket-path SOCKETPATH
        run NexalisAgentService directly. (without systemd)
  gRPC_kafka-sasl-login USERNAME  set KAFKA_SASL_USERNAME for admin and KAFKA_SASL_PASSWORD from standard input inside /etc/NexalisEnviron (requires root)
```

> Inside Docker, you should always run commands with `--socket-path SOCKETPATH`.

`gRPC_kafka-sasl-login` command is not available in Docker.
You must use `config_docker_launcher.json`.

`service-install`/`service-reset` are not available inside container because there is no need for system service,
The Docker daemon already manages restarts and acts as a service.

> Running those commands will complain about systemd not installed or running.

#### sending stop command

```sh
/usr/local/nexalis-agent/NexalisAgent stop --socket-path /tmp/nexalis.sock
```
Sending the stop command to the socket stops all connectors and gRPC_kafka.
It doesn't stop the container.
See the [Errors](#7-errors) section if you have an error.

#### sending start command

```sh
/usr/local/nexalis-agent/NexalisAgent start --socket-path /tmp/nexalis.sock
```

Sending the start command to the socket starts all connectors and gRPC_kafka if they were stopped.
It doesn't stop the container.
See the [Errors](#7-errors) section if you have an error.

#### sending restart command

```sh
/usr/local/nexalis-agent/NexalisAgent restart --socket-path /tmp/nexalis.sock
```

Sending the restart command to the socket restarts all connectors and gRPC_kafka.
It doesn't stop the container.
See the [Errors](#7-errors) section if you have an error.

#### sending status command

```sh
/usr/local/nexalis-agent/NexalisAgent status --socket-path /tmp/nexalis.sock
```
Sending the status command to the socket shows current status from all connectors and gRPC_kafka.
Status works the same as in Windows. See [status](#status-command).

#### sending reload command

Reload works the same as in Windows. See [reload](#reload-command)

```sh
/usr/local/nexalis-agent/NexalisAgent reload --socket-path /tmp/nexalis.sock
```

## 5) Running Agent in Linux Balena

As in Docker, the executables are installed in `/usr/local/nexalis-agent`.

With Balena, you must set up Kafka username/password in the Balena web UI.

- KAFKA_SASL_USERNAME
- KAFKA_SASL_PASSWORD

In Balena as in Docker, you should use the `--socket-path SOCKETPATH` option.

In the Balena UI you can open a shell inside the container.
By selecting the `agent` container, you can then run the same commands as described in the Docker section.

Unlike Docker, Balena starts the agent unconfigured on first boot.
You can transfer files using FTP using the provided guide.
The default directory is the `/app` directory.

## 6) Running Agent in Linux with systemd

### Installation

When installing on Linux without Docker you can choose the install and data folder.
They can be the same.
You can choose the directory from service-install options.

The agent must run as the `nexalis` user.
Create or configure this user beforehand.
After extracting the archive, run commands as the `nexalis` user.

You can install service with:

```sh
./NexalisAgent service-install
```

> by default it will use same directory for data and executable.

> A JSON status is printed. The status field indicates whether the operation was successful.

If you want to change those directories or reinstall from a different location, you can uninstall the service with

```sh
./NexalisAgent service-reset
```
> A JSON status is printed. The status field indicates whether the operation was successful.

### sending status command

```sh
./NexalisAgent status
```

> A JSON status is printed. The status field indicates whether the operation was successful.

Sending status command to the socket, status get current status from all connectors and gRPC_kafka.
Status works the same as in Windows. See [status](#status-command)

### sending reload command

```sh
./NexalisAgent reload
```
Reload works the same as in Windows. See [reload](#reload-command)
A JSON status is printed.
The status field indicates whether the operation was successful.

### start, stop, restart

With `--socket-path`, the command is sent to the service socket.
Without `--socket-path`, `start`, `stop`, and `restart` control the systemd service.

The Linux service runs the executable `nexalis_agent_service\NexalisAgentService`.

A JSON status is printed.
The status field indicates whether the operation was successful.


## 7) Errors

### Windows Path

In Windows if you have:

```
NexalisAgent : The term 'NexalisAgent' is not recognized as the name of a cmdlet, function, script file, or operable program. Check
the spelling of the name, or if a path was included, verify that the path is correct and try again.
At line:1 char:1
+ NexalisAgent
+ ~~~~~~
    + CategoryInfo          : ObjectNotFound: (NexalisAgent:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException
```

Some of your administrator Active Directory rules/policies may reject it.
In that case you can run it with its full Path in Administrator PowerShell:

In x86_64
```pwsh
& "C:\Program Files\Nexalis\NexalisAgent\NexalisAgent.exe" help
```

In x86
```pwsh
& "C:\Program Files (x86)\Nexalis\NexalisAgent\NexalisAgent.exe" help
```

### Linux Path

In Linux if you have
```
sh: command not found: NexalisAgent
```

You need to add it in your PATH.
If it is in the current directory (./NexalisAgent --version is working).

```sh
export PATH="$PATH:$PWD"
```
You can then run it anywhere (as Root).

### Windows Permissions errors

if you have this permissions error in Windows.

```
{ "status": false, "errornum": 2, "errorMessage": "status requires an elevated (Administrator) shell." }
```

You have to run the command in an Administrator PowerShell.
Right click on the PowerShell icon in your task bar and select `Run as Administrator`.
Starting or Stopping Windows services require administrator privileges.


### Linux Permission error

```
{ "status": false, "errornum": 2, "errorMessage": "stop requires root" }
```
If you try to run `NexalisAgent start`,  `NexalisAgent stop`, `NexalisAgent restart`.
Root permissions are required to start/stop/restart the systemd service.
`status` and `reload` do not require root user but usually need to be run as the nexalis user.

### Linux systemd not available

In Linux. If you have this error.
```
{ "status": false, "errornum": 10, "errorMessage": "systemd is not available" }
```
if you are using the nexalis Docker image.
then you must pass the socket location using --socket-path /tmp/nexalis.sock
otherwise NexalisAgent assume a systemd socket.

If you are not using Docker, and have this error. you can still use a service.
For classic init/openrc you can simply add a service, and use the following command inside `NexalisAgent service-run --socket-path /tmp/nexalis.sock`.
then you must reuse the same `--socket-path` in commands.

### config.json JSON configuration error

If `config.json` has a JSON error, then the details will be shown in status as a single error message
```
{
 "status": false,
 "errornum": 1,
 "errorMessage": "[json.exception.parse_error.101] parse error at line 1, column 1: syntax error while parsing value - invalid literal; last read: '#'",
 "connectorsStatus": []
}
```

### config_gRPC_kafka.json JSON configuration error

If `gRPC_kafka/config_gRPC_kafka.json` has a JSON error, then the details will be shown in status as a single error message

```
{
    "status": false,
    "gRPCKafkaStatus": {
        "connector": {
            "name": "gRPC_kafka",
            "siteName": "",
            "deviceID": ""
        },
        "running": false,
        "enabled": false,
        "errorMessage": "gRPC_kafka\\config_gRPC_kafka.json: [json.exception.parse_error.101] parse error at line 1, column 1: syntax error while parsing value - invalid literal; last read: '#'"
    },
    "connectorsStatus": []
}
```

### connectors JSON configuration error

Whenever a connector has a JSON configuration error.
The connector will not be started. instead the details will appear in connectorsStatus.
In this example the agent is stopped.

```json
{
    "status": false,
    "gRPCKafkaStatus": {
        "connector": {
            "name": "gRPC_kafka",
            "deviceModel": "",
            "communicationAddress": "",
            "siteName": "",
            "deviceID": ""
        },
        "running": false,
        "enabled": true,
        "startedAt": "2026-02-05T14:03:28Z",
        "endedAt": "2026-02-05T14:03:29Z",
        "nbRestart": 0,
        "lastExitCode": 0
    },
    "connectorsStatus": [
        {
            "connector": {
                "name": "modbus_connector",
                "deviceModel": "./device_models/solar_inverter/SolarInverterSimulator/SolarInverterSimulator.json",
                "communicationAddress": "127.0.0.1:5022",
                "siteName": "SITE_modbus_2",
                "deviceID": "3"
            },
            "running": false,
            "enabled": false,
            "errorMessage": "connectors/modbus_connector/device_models/solar_inverter/SolarInverterSimulator/SolarInverterSimulator.json: [json.exception.parse_error.101] parse error at line 1, column 2: syntax error while parsing value - invalid literal; last read: '[#'"
        },
		{
            "connector": {
                "name": "opcua_connector",
                "deviceModel": "./device_models/test.json",
                "communicationAddress": "opc.tcp://localhost:4840/server",
                "siteName": "SITE_opcua_1",
                "deviceID": "7"
            },
            "running": false,
            "enabled": true,
            "startedAt": "2026-02-05T14:03:28Z",
            "endedAt": "2026-02-05T14:03:29Z",
            "nbRestart": 0,
            "lastExitCode": 0
        }
    ]
}
```

### Windows: SC Manager is not Available

```
{ \"status\": false, \"errornum\": 10, \"errorMessage\": \"SC Manager is not available\" }
```

This error indicates we do not have access to the Windows service manager SC Manager.
Access is required to check whether the NexalisAgent service is available.

### Windows: service is installed/could not install service.

When trying to run service-install. This error indicates the service is already installed.
If it occurs in a window while running the installer or uninstaller.
It means the service could not be removed.

```
{ "status": false, "errornum": 16, "errorMessage": "service is installed" }
```

If installation fails. Please contact support if you see this error.
Usually, the cause can be a restriction from Active Directory configuration/policy or from the remote access software used like AnyDesk.
The error usually contains the Windows error message.

```
{ "status": false, "errornum": 40, "errorMessage": "could not install service ..." }
```

### service is not running

That error indicates that the service is not running.
It occurs when running the stop command while the service is not running.

### service running

That error indicates that the service is running.
It occurs when running the stop command while the service is running.
